<% layout('layouts/boilerplate') %>
<%-include('../partials/navbar')%>

<div class="row">
    <div class="col-6 mx-auto">
        <form action="/products" method="post" class=" formnew needs-validation" novalidate >
            <!-- remember to put this class from bootstrap in form and also this novalidate  to remove requried validation and js validation to run and now copy the respective divs from bootstrap to display this filed is required in each filed u want the required field to get displayed-->
            <!-- if we add novalidate to input then form will get submitted even if there is required in input and we dont speicfy this input then too form will get submitee because of this novalidate and product will be added but take care of server side vlaidtiaon see if name is required in schema then even here form gets submitted but then in our server side due to mongodb our name was required but id didnt came so it produced an error due to server side validation -->
        <!-- now in bootstrap in forms we have validation and it produces better way to tell that this field is required so it applies a differnet kind of validation -->
         <!-- also for all this to work make sure u have given required in all those fields which are must to be entereed if u dont put required on taht input then our this bootstrap wont work on it  -->
         <div class="mb-3">
               
        <label for="name">Name:</label>
        <input type="text" class="form-control" name="name" id="name" placeholder="name of the product" required>
        <!-- here inside input name="name" type that name only which u gave in the schemaa ,remember this very improtant point -->
        <div class="valid-feedback">
            Looks good!
        </div>
        <div class="invalid-feedback">
            Please enter the field.
        </div>
    </div>
    <div class="mb-3">
        
        <label for="img">Image:</label>
        <input type="text" class="form-control" name="img" id="img" placeholder="image url of the product" required>
        <!-- here required in input is the valdiation -->
        <div class="valid-feedback">
            Looks good!
          </div>
          <div class="invalid-feedback">
            Please enter the field.
          </div>
    </div>
    <div class="mb-3">
        
        <label for="price">Price:</label>
        <input type="number" class="form-control" name="price" id="price" placeholder="enter price of the product" required> 
        <div class="valid-feedback">
            Looks good!
          </div>
          <div class="invalid-feedback">
            Please enter the field.
          </div>
    </div>
    <div class="mb-3">
        
        <label for="des">Description:</label>
        <textarea  rows="3" name="description" id="des" required placeholder="description of the product"></textarea>
        <div class="valid-feedback">
            Looks good!
          </div>
          <div class="invalid-feedback">
            Please enter the field.
          </div>
    </div>
    <button class="btn btn-success btn-sm">ADD PRODUCT</button>
    </form>
    </div>
</div>
<script>
    //here is bootstrap js code for validating input fileds
// Example starter JavaScript for disabling form submissions if there are invalid fields
(() => {
    //here this function is called by itself and it doesnt have a name so these functions are called "iife" immediatelty invoked function expression so whenver they are hit by js they runs so make sure to run them
  'use strict'

  // Fetch all the forms we want to apply custom Bootstrap validation styles to
  const forms = document.querySelectorAll('.needs-validation')

  // Loop over them and prevent submission
  Array.from(forms).forEach(form => {
    form.addEventListener('submit', event => {
      if (!form.checkValidity()) {
        event.preventDefault()
        event.stopPropagation()
      }

      form.classList.add('was-validated')
    }, false)
  })
})()
//here this function has name and is getting called itself
</script>